{"file_contents":{"app.py":{"content":"import os\nimport logging\nfrom flask import Flask\nfrom werkzeug.middleware.proxy_fix import ProxyFix\nfrom web_server import create_app\n\n# Configure logging\nlogging.basicConfig(level=logging.DEBUG)\n\n# Create the Flask app\napp = create_app()\napp.secret_key = os.environ.get(\"SESSION_SECRET\", \"dev-secret-key-change-in-production\")\napp.wsgi_app = ProxyFix(app.wsgi_app, x_proto=1, x_host=1)\n","size_bytes":387},"dashboard_manager.py":{"content":"import json\nfrom datetime import datetime\nimport logging\n\nlogger = logging.getLogger(__name__)\n\nclass DashboardManager:\n    \"\"\"Manages dashboard configuration and widgets\"\"\"\n    \n    def __init__(self):\n        self.widget_types = {\n            'passenger_flow': {\n                'name': 'Passenger Flow',\n                'description': '24-hour passenger traffic visualization',\n                'chart_type': 'line'\n            },\n            'queue_status': {\n                'name': 'Queue Status',\n                'description': 'Real-time queue monitoring',\n                'chart_type': 'bar'\n            },\n            'baggage_tracking': {\n                'name': 'Baggage Tracking',\n                'description': 'Live conveyor belt status',\n                'chart_type': 'gauge'\n            },\n            'flight_status': {\n                'name': 'Flight Status',\n                'description': 'Comprehensive flight information',\n                'chart_type': 'table'\n            },\n            'security_status': {\n                'name': 'Security Status',\n                'description': 'Checkpoint monitoring',\n                'chart_type': 'status'\n            },\n            'resource_utilization': {\n                'name': 'Resource Utilization',\n                'description': 'System resource usage',\n                'chart_type': 'pie'\n            },\n            'staff_availability': {\n                'name': 'Staff Availability',\n                'description': 'Personnel deployment metrics',\n                'chart_type': 'bar'\n            }\n        }\n    \n    def get_widget_configuration(self, widget_type):\n        \"\"\"Get configuration for a specific widget type\"\"\"\n        return self.widget_types.get(widget_type, {})\n    \n    def get_all_widget_types(self):\n        \"\"\"Get all available widget types\"\"\"\n        return self.widget_types\n    \n    def create_dashboard_layout(self, airport_code):\n        \"\"\"Create default dashboard layout for an airport\"\"\"\n        layout = {\n            'airport_code': airport_code,\n            'created_at': datetime.now().isoformat(),\n            'widgets': [\n                {'type': 'passenger_flow', 'position': {'row': 1, 'col': 1, 'span': 2}},\n                {'type': 'queue_status', 'position': {'row': 1, 'col': 3, 'span': 1}},\n                {'type': 'baggage_tracking', 'position': {'row': 2, 'col': 1, 'span': 1}},\n                {'type': 'flight_status', 'position': {'row': 2, 'col': 2, 'span': 2}},\n                {'type': 'security_status', 'position': {'row': 3, 'col': 1, 'span': 1}},\n                {'type': 'resource_utilization', 'position': {'row': 3, 'col': 2, 'span': 1}},\n                {'type': 'staff_availability', 'position': {'row': 3, 'col': 3, 'span': 1}}\n            ]\n        }\n        return layout\n    \n    def validate_widget_data(self, widget_type, data):\n        \"\"\"Validate widget data structure\"\"\"\n        try:\n            widget_config = self.get_widget_configuration(widget_type)\n            if not widget_config:\n                return False, \"Unknown widget type\"\n            \n            # Basic validation - ensure data is not empty\n            if not data:\n                return False, \"Empty data\"\n            \n            return True, \"Valid\"\n        except Exception as e:\n            logger.error(f\"Error validating widget data: {e}\")\n            return False, str(e)\n","size_bytes":3396},"data_sources.py":{"content":"import random\nimport datetime\nfrom typing import Dict, List, Any\nimport logging\nimport requests\nimport json\n\nlogger = logging.getLogger(__name__)\n\nclass DataSourceManager:\n    \"\"\"Manages data sources for airport operations\"\"\"\n    \n    def __init__(self):\n        self.flight_statuses = ['On Time', 'Delayed', 'Boarding', 'Departed', 'Cancelled', 'Arrived']\n        self.airlines = ['Air India', 'IndiGo', 'SpiceJet', 'Vistara', 'GoAir', 'Emirates', 'Singapore Airlines']\n        self.destinations = {\n            'DEL': ['Mumbai', 'Bangalore', 'Chennai', 'Kolkata', 'Hyderabad', 'Pune', 'Goa'],\n            'BLR': ['Delhi', 'Mumbai', 'Chennai', 'Hyderabad', 'Kochi', 'Pune', 'Goa'],\n            'GOX': ['Delhi', 'Mumbai', 'Bangalore', 'Chennai', 'Pune', 'Hyderabad'],\n            'PNY': ['Chennai', 'Bangalore', 'Delhi', 'Mumbai', 'Hyderabad'],\n            'IXJ': ['Delhi', 'Mumbai', 'Srinagar', 'Chandigarh', 'Amritsar'],\n            'SXR': ['Delhi', 'Mumbai', 'Jammu', 'Chandigarh', 'Leh']\n        }\n        \n        # Real airport facility data\n        self.airport_facilities = {\n            'DEL': {\n                'terminals': ['T1', 'T2', 'T3'],\n                'gates': {\n                    'T1': ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'A9', 'A10'],\n                    'T2': ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B9', 'B10'], \n                    'T3': ['C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8', 'C9', 'C10']\n                },\n                'airlines': {\n                    'T1': ['Air India', 'IndiGo', 'SpiceJet'],\n                    'T2': ['Vistara', 'GoAir'],\n                    'T3': ['Emirates', 'Singapore Airlines', 'Air India']\n                },\n                'washrooms': [\n                    {'location': 'T1 - Gate A5', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T1 - Arrival Hall', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T2 - Gate B7', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T3 - Gate C3', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T3 - Gate C8', 'type': 'Family', 'status': 'Available'}\n                ],\n                'services': [\n                    {'name': 'Currency Exchange', 'location': 'T3 - Level 1', 'hours': '24/7'},\n                    {'name': 'ATM', 'location': 'All Terminals', 'hours': '24/7'},\n                    {'name': 'Medical Center', 'location': 'T3 - Level 2', 'hours': '24/7'},\n                    {'name': 'Pharmacy', 'location': 'T1 & T3', 'hours': '6:00-23:00'}\n                ]\n            },\n            'BLR': {\n                'terminals': ['T1', 'T2'],\n                'gates': {\n                    'T1': ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8'],\n                    'T2': ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8']\n                },\n                'airlines': {\n                    'T1': ['Air India', 'IndiGo', 'SpiceJet', 'Vistara'],\n                    'T2': ['Emirates', 'Singapore Airlines', 'GoAir']\n                },\n                'washrooms': [\n                    {'location': 'T1 - Gate A3', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T1 - Departure Lounge', 'type': 'General', 'status': 'Available'},\n                    {'location': 'T2 - Gate B5', 'type': 'General', 'status': 'Available'}\n                ],\n                'services': [\n                    {'name': 'Currency Exchange', 'location': 'T1 & T2', 'hours': '24/7'},\n                    {'name': 'Medical Center', 'location': 'T1 - Ground Floor', 'hours': '24/7'}\n                ]\n            }\n        }\n        \n        # Sample individual baggage for tracking\n        self.sample_baggage = {}\n        self.complaints = []\n    \n    def get_passenger_flow_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate realistic passenger flow data for 24-hour period\"\"\"\n        try:\n            current_time = datetime.datetime.now()\n            hours = []\n            passengers = []\n            \n            # Generate 24-hour data with realistic patterns\n            for i in range(24):\n                hour = (current_time.hour + i) % 24\n                hours.append(f\"{hour:02d}:00\")\n                \n                # Rush hours: 6-9 AM and 6-9 PM\n                if 6 <= hour <= 9 or 18 <= hour <= 21:\n                    base_passengers = random.randint(800, 1200)\n                elif 22 <= hour or hour <= 5:  # Late night/early morning\n                    base_passengers = random.randint(100, 300)\n                else:  # Regular hours\n                    base_passengers = random.randint(400, 700)\n                \n                # Add some randomness\n                passengers.append(base_passengers + random.randint(-50, 50))\n            \n            return {\n                'chart': {\n                    'x': hours,\n                    'y': passengers,\n                    'type': 'scatter',\n                    'mode': 'lines+markers',\n                    'name': 'Passenger Flow',\n                    'line': {'color': '#3b82f6', 'width': 3}\n                },\n                'layout': {\n                    'title': '24-Hour Passenger Flow',\n                    'xaxis': {'title': 'Time'},\n                    'yaxis': {'title': 'Number of Passengers'},\n                    'showlegend': False\n                },\n                'current_hour_passengers': passengers[0],\n                'peak_hour': f\"{hours[passengers.index(max(passengers))]}\",\n                'total_daily': sum(passengers[:current_time.hour + 1])\n            }\n        except Exception as e:\n            logger.error(f\"Error generating passenger flow data: {e}\")\n            return {'error': 'Failed to generate passenger flow data'}\n    \n    def get_queue_status_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate queue monitoring data\"\"\"\n        try:\n            checkpoints = [\n                {'name': 'Security Check A', 'current_queue': random.randint(5, 25), 'avg_wait_time': random.randint(3, 15)},\n                {'name': 'Security Check B', 'current_queue': random.randint(8, 30), 'avg_wait_time': random.randint(5, 18)},\n                {'name': 'Check-in Counter 1', 'current_queue': random.randint(10, 40), 'avg_wait_time': random.randint(2, 12)},\n                {'name': 'Check-in Counter 2', 'current_queue': random.randint(6, 35), 'avg_wait_time': random.randint(3, 10)},\n                {'name': 'Immigration', 'current_queue': random.randint(3, 20), 'avg_wait_time': random.randint(1, 8)},\n                {'name': 'Customs', 'current_queue': random.randint(2, 15), 'avg_wait_time': random.randint(1, 6)}\n            ]\n            \n            checkpoint_names = [cp['name'] for cp in checkpoints]\n            queue_lengths = [cp['current_queue'] for cp in checkpoints]\n            wait_times = [cp['avg_wait_time'] for cp in checkpoints]\n            \n            return {\n                'chart': {\n                    'x': checkpoint_names,\n                    'y': queue_lengths,\n                    'type': 'bar',\n                    'name': 'Queue Length',\n                    'marker': {'color': '#10b981'}\n                },\n                'layout': {\n                    'title': 'Current Queue Status',\n                    'xaxis': {'title': 'Checkpoints'},\n                    'yaxis': {'title': 'Number of People'},\n                    'showlegend': False\n                },\n                'wait_times_chart': {\n                    'x': checkpoint_names,\n                    'y': wait_times,\n                    'type': 'bar',\n                    'name': 'Wait Time',\n                    'marker': {'color': '#f59e0b'}\n                },\n                'checkpoints': checkpoints,\n                'total_in_queues': sum(queue_lengths),\n                'avg_wait_time_overall': sum(wait_times) / len(wait_times)\n            }\n        except Exception as e:\n            logger.error(f\"Error generating queue status data: {e}\")\n            return {'error': 'Failed to generate queue status data'}\n    \n    def get_baggage_tracking_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate enhanced baggage tracking data with live conveyor visualization\"\"\"\n        try:\n            # Get live conveyor data\n            live_data = self.get_live_conveyor_data(airport_code)\n            \n            if live_data.get('error'):\n                return live_data\n            \n            conveyor_belts = live_data['conveyor_belts']\n            \n            # Utilization pie chart data\n            utilization_data = {\n                'labels': ['High Usage', 'Medium Usage', 'Low Usage', 'Idle'],\n                'values': [\n                    len([b for b in conveyor_belts if b['utilization'] > 80]),\n                    len([b for b in conveyor_belts if 50 < b['utilization'] <= 80]),\n                    len([b for b in conveyor_belts if 20 < b['utilization'] <= 50]),\n                    len([b for b in conveyor_belts if b['utilization'] <= 20])\n                ],\n                'type': 'pie',\n                'marker': {'colors': ['#ef4444', '#f59e0b', '#10b981', '#6b7280']}\n            }\n            \n            return {\n                'chart': utilization_data,\n                'layout': {\n                    'title': 'Conveyor Belt Utilization',\n                    'showlegend': True\n                },\n                'conveyor_belts': conveyor_belts,\n                'total_belts': live_data['total_belts'],\n                'active_belts': live_data['active_belts'],\n                'total_bags_processed': sum([b['total_processed_today'] for b in conveyor_belts]),\n                'avg_utilization': sum([b['utilization'] for b in conveyor_belts]) / len(conveyor_belts),\n                'live_bags_count': live_data['total_bags_active'],\n                'avg_belt_speed': live_data['avg_speed']\n            }\n        except Exception as e:\n            logger.error(f\"Error generating baggage tracking data: {e}\")\n            return {'error': 'Failed to generate baggage tracking data'}\n    \n    def get_flight_status_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate flight status data with weather integration\"\"\"\n        try:\n            # Get weather data for impact on flights\n            weather = self.get_weather_data(airport_code)\n            \n            flights = []\n            current_time = datetime.datetime.now()\n            \n            for i in range(12):  # Generate 12 flights\n                flight_time = current_time + datetime.timedelta(hours=random.randint(-2, 8))\n                \n                # Weather affects flight status\n                base_statuses = self.flight_statuses.copy()\n                if weather.get('impact') == 'High':\n                    # More delays due to bad weather\n                    status = random.choice(['Delayed', 'Delayed', 'On Time', 'Boarding', 'Cancelled'])\n                    delay_reason = f\"Weather: {weather.get('condition', 'Unknown')}\"\n                else:\n                    status = random.choice(base_statuses)\n                    delay_reason = random.choice(['Air Traffic', 'Technical', 'Crew', 'None'])\n                \n                flight = {\n                    'flight_number': f'{random.choice([\"AI\", \"6E\", \"SG\", \"UK\", \"G8\"])}{random.randint(100, 999)}',\n                    'airline': random.choice(self.airlines),\n                    'destination': random.choice(self.destinations.get(airport_code, ['Mumbai', 'Delhi'])),\n                    'scheduled_time': flight_time.strftime('%H:%M'),\n                    'actual_time': (flight_time + datetime.timedelta(minutes=random.randint(-30, 60))).strftime('%H:%M'),\n                    'status': status,\n                    'gate': f'A{random.randint(1, 20)}',\n                    'terminal': random.choice(['T1', 'T2', 'T3']),\n                    'passengers': random.randint(80, 180),\n                    'weather_impact': weather.get('impact', 'Low'),\n                    'delay_reason': delay_reason if status == 'Delayed' else None\n                }\n                flights.append(flight)\n            \n            # Status distribution for chart\n            status_counts = {}\n            for flight in flights:\n                status = flight['status']\n                status_counts[status] = status_counts.get(status, 0) + 1\n            \n            return {\n                'chart': {\n                    'labels': list(status_counts.keys()),\n                    'values': list(status_counts.values()),\n                    'type': 'pie',\n                    'marker': {'colors': ['#10b981', '#f59e0b', '#3b82f6', '#6b7280', '#ef4444', '#8b5cf6']}\n                },\n                'layout': {\n                    'title': 'Flight Status Distribution',\n                    'showlegend': True\n                },\n                'flights': flights,\n                'total_flights': len(flights),\n                'on_time_flights': len([f for f in flights if f['status'] == 'On Time']),\n                'delayed_flights': len([f for f in flights if f['status'] == 'Delayed']),\n                'total_passengers': sum([f['passengers'] for f in flights]),\n                'weather': weather,\n                'weather_delays': len([f for f in flights if f.get('delay_reason') and f.get('delay_reason', '').startswith('Weather')])\n            }\n        except Exception as e:\n            logger.error(f\"Error generating flight status data: {e}\")\n            return {'error': 'Failed to generate flight status data'}\n    \n    def get_security_status_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate security checkpoint status\"\"\"\n        try:\n            checkpoints = []\n            for i in range(1, 8):\n                status = random.choice(['Operational', 'Maintenance', 'Closed'])\n                checkpoint = {\n                    'checkpoint_id': f'CP-{i:02d}',\n                    'location': f'Terminal {random.choice([\"A\", \"B\", \"C\"])} - Gate {i}',\n                    'status': status,\n                    'staff_count': random.randint(2, 6) if status == 'Operational' else 0,\n                    'throughput_per_hour': random.randint(100, 200) if status == 'Operational' else 0,\n                    'last_incident': random.choice(['None', '2 hours ago', '1 day ago', 'None', 'None']),\n                    'alert_level': random.choice(['Green', 'Green', 'Yellow', 'Green'])\n                }\n                checkpoints.append(checkpoint)\n            \n            status_counts = {}\n            for cp in checkpoints:\n                status = cp['status']\n                status_counts[status] = status_counts.get(status, 0) + 1\n            \n            return {\n                'chart': {\n                    'labels': list(status_counts.keys()),\n                    'values': list(status_counts.values()),\n                    'type': 'pie',\n                    'marker': {'colors': ['#10b981', '#f59e0b', '#ef4444']}\n                },\n                'layout': {\n                    'title': 'Security Checkpoint Status',\n                    'showlegend': True\n                },\n                'checkpoints': checkpoints,\n                'total_checkpoints': len(checkpoints),\n                'operational_checkpoints': len([cp for cp in checkpoints if cp['status'] == 'Operational']),\n                'total_staff_deployed': sum([cp['staff_count'] for cp in checkpoints]),\n                'total_throughput': sum([cp['throughput_per_hour'] for cp in checkpoints])\n            }\n        except Exception as e:\n            logger.error(f\"Error generating security status data: {e}\")\n            return {'error': 'Failed to generate security status data'}\n    \n    def get_resource_utilization_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate resource utilization data\"\"\"\n        try:\n            resources = {\n                'CPU Usage': random.randint(60, 90),\n                'Memory Usage': random.randint(70, 85),\n                'Network Bandwidth': random.randint(50, 80),\n                'Storage Usage': random.randint(65, 95),\n                'Power Consumption': random.randint(75, 90)\n            }\n            \n            return {\n                'chart': {\n                    'labels': list(resources.keys()),\n                    'values': list(resources.values()),\n                    'type': 'pie',\n                    'marker': {'colors': ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6']}\n                },\n                'layout': {\n                    'title': 'System Resource Utilization (%)',\n                    'showlegend': True\n                },\n                'resources': resources,\n                'overall_health': 'Good' if max(resources.values()) < 85 else 'Warning',\n                'peak_usage': max(resources.values()),\n                'avg_usage': sum(resources.values()) / len(resources)\n            }\n        except Exception as e:\n            logger.error(f\"Error generating resource utilization data: {e}\")\n            return {'error': 'Failed to generate resource utilization data'}\n    \n    def get_staff_availability_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate staff availability data\"\"\"\n        try:\n            departments = [\n                {'name': 'Security', 'available': random.randint(15, 25), 'total': 30},\n                {'name': 'Ground Staff', 'available': random.randint(20, 35), 'total': 40},\n                {'name': 'Check-in', 'available': random.randint(10, 18), 'total': 20},\n                {'name': 'Baggage Handling', 'available': random.randint(12, 22), 'total': 25},\n                {'name': 'Maintenance', 'available': random.randint(6, 12), 'total': 15},\n                {'name': 'Customer Service', 'available': random.randint(8, 15), 'total': 18}\n            ]\n            \n            # Calculate availability percentages\n            for dept in departments:\n                dept['availability_percent'] = round((dept['available'] / dept['total']) * 100, 1)\n            \n            dept_names = [dept['name'] for dept in departments]\n            availability_percentages = [dept['availability_percent'] for dept in departments]\n            \n            return {\n                'chart': {\n                    'x': dept_names,\n                    'y': availability_percentages,\n                    'type': 'bar',\n                    'name': 'Staff Availability %',\n                    'marker': {'color': '#3b82f6'}\n                },\n                'layout': {\n                    'title': 'Staff Availability by Department',\n                    'xaxis': {'title': 'Department'},\n                    'yaxis': {'title': 'Availability %'},\n                    'showlegend': False\n                },\n                'departments': departments,\n                'total_staff': sum([dept['total'] for dept in departments]),\n                'available_staff': sum([dept['available'] for dept in departments]),\n                'overall_availability': round((sum([dept['available'] for dept in departments]) / sum([dept['total'] for dept in departments])) * 100, 1)\n            }\n        except Exception as e:\n            logger.error(f\"Error generating staff availability data: {e}\")\n            return {'error': 'Failed to generate staff availability data'}\n    \n    def get_weather_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Get real weather data for airport using free API\"\"\"\n        try:\n            # Airport coordinates (approximate)\n            coordinates = {\n                'DEL': {'lat': 28.5562, 'lon': 77.1000},\n                'BLR': {'lat': 13.1986, 'lon': 77.7066}, \n                'GOX': {'lat': 15.3808, 'lon': 73.8389},\n                'PNY': {'lat': 11.9696, 'lon': 79.8125},\n                'IXJ': {'lat': 32.6890, 'lon': 74.8378},\n                'SXR': {'lat': 33.9871, 'lon': 74.7747}\n            }\n            \n            coord = coordinates.get(airport_code, coordinates['DEL'])\n            \n            # Free weather API call\n            url = \"https://api.open-meteo.com/v1/forecast\"\n            params = {\n                'latitude': coord['lat'],\n                'longitude': coord['lon'],\n                'current_weather': 'true',\n                'hourly': 'temperature_2m,weathercode,windspeed_10m,visibility'\n            }\n            \n            response = requests.get(url, params=params, timeout=5)\n            if response.status_code == 200:\n                data = response.json()\n                current = data.get('current_weather', {})\n                \n                # Weather code to condition mapping\n                weather_codes = {\n                    0: 'Clear', 1: 'Mainly Clear', 2: 'Partly Cloudy', 3: 'Overcast',\n                    45: 'Fog', 48: 'Depositing Rime Fog', 51: 'Light Drizzle',\n                    61: 'Rain', 63: 'Moderate Rain', 65: 'Heavy Rain',\n                    71: 'Light Snow', 95: 'Thunderstorm'\n                }\n                \n                condition = weather_codes.get(current.get('weathercode', 0), 'Unknown')\n                \n                return {\n                    'temperature': current.get('temperature', 25),\n                    'condition': condition,\n                    'wind_speed': current.get('windspeed', 10),\n                    'visibility': 'Good' if condition in ['Clear', 'Mainly Clear'] else 'Limited',\n                    'impact': 'Low' if condition in ['Clear', 'Mainly Clear', 'Partly Cloudy'] else 'High'\n                }\n            else:\n                # Fallback to simulated data\n                return self._get_simulated_weather()\n        except Exception as e:\n            logger.warning(f\"Weather API error: {e}, using simulated data\")\n            return self._get_simulated_weather()\n    \n    def _get_simulated_weather(self) -> Dict[str, Any]:\n        \"\"\"Generate simulated weather data as fallback\"\"\"\n        conditions = ['Clear', 'Partly Cloudy', 'Overcast', 'Rain', 'Fog']\n        condition = random.choice(conditions)\n        \n        return {\n            'temperature': random.randint(15, 35),\n            'condition': condition,\n            'wind_speed': random.randint(5, 25),\n            'visibility': 'Good' if condition in ['Clear', 'Partly Cloudy'] else 'Limited',\n            'impact': 'Low' if condition in ['Clear', 'Partly Cloudy'] else 'High'\n        }\n    \n    def get_live_conveyor_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Generate live conveyor belt data with individual bag tracking\"\"\"\n        try:\n            conveyor_belts = []\n            \n            for i in range(1, 6):\n                status = random.choice(['Active', 'Idle', 'Maintenance'])\n                bags_on_belt = []\n                \n                if status == 'Active':\n                    # Generate bags currently on this belt\n                    num_bags = random.randint(3, 12)\n                    for j in range(num_bags):\n                        bag_id = f'BAG{random.randint(10000, 99999)}'\n                        bags_on_belt.append({\n                            'bag_id': bag_id,\n                            'position': random.randint(0, 100),  # Position on belt (0-100%)\n                            'flight': f'{random.choice([\"AI\", \"6E\", \"SG\"])}{random.randint(100, 999)}',\n                            'destination': random.choice(['Mumbai', 'Delhi', 'Chennai']),\n                            'status': 'In Transit',\n                            'priority': random.choice(['Normal', 'Priority', 'Transfer'])\n                        })\n                \n                belt_data = {\n                    'belt_id': f'Belt {i}',\n                    'terminal': f'T{random.randint(1, 3)}',\n                    'status': status,\n                    'speed': random.randint(1, 5) if status == 'Active' else 0,\n                    'bags_on_belt': bags_on_belt,\n                    'total_processed_today': random.randint(200, 800),\n                    'last_maintenance': f'{random.randint(1, 30)} days ago',\n                    'utilization': random.randint(60, 95) if status == 'Active' else 0\n                }\n                conveyor_belts.append(belt_data)\n            \n            return {\n                'conveyor_belts': conveyor_belts,\n                'total_belts': len(conveyor_belts),\n                'active_belts': len([b for b in conveyor_belts if b['status'] == 'Active']),\n                'total_bags_active': sum(len(b['bags_on_belt']) for b in conveyor_belts),\n                'avg_speed': sum(b['speed'] for b in conveyor_belts) / len(conveyor_belts)\n            }\n        except Exception as e:\n            logger.error(f\"Error generating live conveyor data: {e}\")\n            return {'error': 'Failed to generate live conveyor data'}\n    \n    def track_passenger_baggage(self, bag_id: str = None, flight_number: str = None) -> Dict[str, Any]:\n        \"\"\"Track individual passenger baggage\"\"\"\n        try:\n            if bag_id:\n                # Track specific bag\n                if bag_id not in self.sample_baggage:\n                    # Generate new bag tracking data\n                    statuses = ['Checked In', 'In Sorting', 'On Conveyor', 'Loading Aircraft', 'In Transit', 'Arrived']\n                    current_status = random.choice(statuses)\n                    \n                    flight_num = flight_number if flight_number else f'{random.choice([\"AI\", \"6E\", \"SG\"])}{random.randint(100, 999)}'\n                    self.sample_baggage[bag_id] = {\n                        'bag_id': bag_id,\n                        'flight_number': flight_num,\n                        'passenger_name': 'John Doe',  # In real system, this would be from booking\n                        'current_status': current_status,\n                        'location': f'Terminal {random.randint(1, 3)} - Belt {random.randint(1, 5)}',\n                        'last_updated': datetime.datetime.now().strftime('%H:%M:%S'),\n                        'weight': f'{random.randint(15, 30)} kg',\n                        'destination': random.choice(['Mumbai', 'Delhi', 'Chennai']),\n                        'tracking_history': [\n                            {'time': '14:30', 'status': 'Checked In', 'location': 'Check-in Counter 5'},\n                            {'time': '14:45', 'status': 'In Sorting', 'location': 'Baggage Sorting Area'},\n                            {'time': '15:00', 'status': current_status, 'location': f'Terminal {random.randint(1, 3)} - Belt {random.randint(1, 5)}'}\n                        ]\n                    }\n                \n                return self.sample_baggage[bag_id]\n            else:\n                # Return sample tracking data\n                return {\n                    'message': 'Enter your bag ID or flight number to track your baggage',\n                    'sample_bags': list(self.sample_baggage.keys())[:5]\n                }\n        except Exception as e:\n            logger.error(f\"Error tracking baggage: {e}\")\n            return {'error': 'Failed to track baggage'}\n    \n    def submit_baggage_complaint(self, passenger_name: str, flight_number: str, \n                                bag_id: str, issue_type: str, description: str) -> Dict[str, Any]:\n        \"\"\"Submit baggage complaint\"\"\"\n        try:\n            complaint_id = f'COMP{random.randint(10000, 99999)}'\n            \n            complaint = {\n                'complaint_id': complaint_id,\n                'passenger_name': passenger_name,\n                'flight_number': flight_number,\n                'bag_id': bag_id,\n                'issue_type': issue_type,\n                'description': description,\n                'status': 'Received',\n                'priority': 'High' if issue_type == 'Lost Baggage' else 'Medium',\n                'submitted_at': datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'),\n                'estimated_resolution': '24-48 hours'\n            }\n            \n            self.complaints.append(complaint)\n            \n            return {\n                'success': True,\n                'complaint_id': complaint_id,\n                'message': f'Complaint {complaint_id} has been submitted successfully. You will receive updates via email.',\n                'estimated_resolution': complaint['estimated_resolution']\n            }\n        except Exception as e:\n            logger.error(f\"Error submitting complaint: {e}\")\n            return {'error': 'Failed to submit complaint'}\n    \n    def get_airport_facilities(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Get airport facility information\"\"\"\n        try:\n            facilities = self.airport_facilities.get(airport_code, {\n                'terminals': ['T1'],\n                'gates': {'T1': ['A1', 'A2', 'A3']},\n                'airlines': {'T1': ['Air India', 'IndiGo']},\n                'washrooms': [{'location': 'T1 - Gate A2', 'type': 'General', 'status': 'Available'}],\n                'services': [{'name': 'ATM', 'location': 'T1', 'hours': '24/7'}]\n            })\n            \n            return {\n                'facilities': facilities,\n                'total_terminals': len(facilities['terminals']),\n                'total_gates': sum(len(gates) for gates in facilities['gates'].values()),\n                'airlines_count': sum(len(airlines) for airlines in facilities['airlines'].values())\n            }\n        except Exception as e:\n            logger.error(f\"Error getting airport facilities: {e}\")\n            return {'error': 'Failed to get airport facilities'}\n    \n    def get_complaints_data(self, airport_code: str) -> Dict[str, Any]:\n        \"\"\"Get complaints data for staff dashboard\"\"\"\n        try:\n            # Add some sample complaints if none exist\n            if not self.complaints:\n                sample_complaints = [\n                    {\n                        'complaint_id': 'COMP12345',\n                        'passenger_name': 'Jane Smith',\n                        'flight_number': 'AI401',\n                        'bag_id': 'BAG67890',\n                        'issue_type': 'Lost Baggage',\n                        'description': 'Baggage missing after flight arrival',\n                        'status': 'In Progress',\n                        'priority': 'High',\n                        'submitted_at': '2025-08-28 10:30:00',\n                        'estimated_resolution': '24-48 hours'\n                    },\n                    {\n                        'complaint_id': 'COMP12346',\n                        'passenger_name': 'Bob Johnson',\n                        'flight_number': '6E123',\n                        'bag_id': 'BAG54321',\n                        'issue_type': 'Damaged Baggage',\n                        'description': 'Suitcase handle broken during handling',\n                        'status': 'Resolved',\n                        'priority': 'Medium',\n                        'submitted_at': '2025-08-27 14:15:00',\n                        'estimated_resolution': '24-48 hours'\n                    }\n                ]\n                self.complaints.extend(sample_complaints)\n            \n            # Get complaint statistics\n            total_complaints = len(self.complaints)\n            open_complaints = len([c for c in self.complaints if c['status'] != 'Resolved'])\n            high_priority = len([c for c in self.complaints if c['priority'] == 'High'])\n            \n            return {\n                'complaints': self.complaints,\n                'total_complaints': total_complaints,\n                'open_complaints': open_complaints,\n                'resolved_complaints': total_complaints - open_complaints,\n                'high_priority_complaints': high_priority,\n                'complaint_types': {\n                    'Lost Baggage': len([c for c in self.complaints if c['issue_type'] == 'Lost Baggage']),\n                    'Damaged Baggage': len([c for c in self.complaints if c['issue_type'] == 'Damaged Baggage']),\n                    'Delayed Baggage': len([c for c in self.complaints if c['issue_type'] == 'Delayed Baggage'])\n                }\n            }\n        except Exception as e:\n            logger.error(f\"Error getting complaints data: {e}\")\n            return {'error': 'Failed to get complaints data'}\n","size_bytes":32359},"main.py":{"content":"from app import app\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000, debug=True)\n","size_bytes":99},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"email-validator>=2.3.0\",\n    \"flask-dance>=7.1.0\",\n    \"flask>=3.1.2\",\n    \"flask-sqlalchemy>=3.1.1\",\n    \"gunicorn>=23.0.0\",\n    \"psycopg2-binary>=2.9.10\",\n    \"requests>=2.32.5\",\n    \"werkzeug>=3.1.3\",\n    \"flask-login>=0.6.3\",\n    \"oauthlib>=3.3.1\",\n    \"pyjwt>=2.10.1\",\n    \"openai>=1.102.0\",\n]\n","size_bytes":446},"replit.md":{"content":"# Overview\n\nAI Smart Airport Dashboard is a comprehensive real-time monitoring system for managing multiple airport operations. The application provides individual dashboards for six pre-configured Indian airports (DEL, BLR, GOX, PNY, IXJ, SXR) with real-time data visualization including passenger flow, queue status, baggage tracking, flight information, security monitoring, resource utilization, and staff availability metrics.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n- **Template Engine**: Jinja2 templates with Bootstrap 5 for responsive UI\n- **JavaScript Architecture**: Vanilla ES6 classes for dashboard management and settings\n- **Visualization**: Plotly.js for interactive charts and data visualization\n- **Styling**: CSS custom properties for theming with dark/light mode support\n- **Layout**: CSS Grid and Flexbox for responsive widget positioning\n- **State Management**: LocalStorage for user preferences and theme persistence\n\n## Backend Architecture\n- **Web Framework**: Flask with modular blueprint structure\n- **Application Factory Pattern**: Centralized app creation in `web_server.py`\n- **Manager Classes**: Separation of concerns with `DashboardManager` and `DataSourceManager`\n- **Data Layer**: Simulated real-time data generation with realistic airport operation patterns\n- **API Design**: RESTful endpoints for widget data retrieval\n- **Middleware**: ProxyFix for deployment behind reverse proxies\n\n## Core Components\n- **Dashboard Manager**: Handles widget configuration and types with predefined chart configurations\n- **Data Source Manager**: Generates realistic airport operation data with time-based patterns\n- **Multi-Airport Support**: Centralized airport configuration with individual dashboard routing\n- **Widget System**: Modular widget architecture supporting multiple chart types (line, bar, gauge, table, status, pie)\n\n## Data Management\n- **Real-time Simulation**: Time-based data generation mimicking actual airport traffic patterns\n- **Rush Hour Logic**: Peak traffic simulation for 6-9 AM and 6-9 PM periods\n- **Multi-Airport Data**: Location-specific flight routes and airline configurations\n- **Auto-refresh**: Client-side 30-second intervals with visibility API integration\n\n# External Dependencies\n\n## Frontend Libraries\n- **Bootstrap 5.3.0**: UI framework for responsive design and components\n- **Font Awesome 6.4.0**: Icon library for dashboard interface elements\n- **Plotly.js**: Interactive charting and data visualization library\n\n## Backend Framework\n- **Flask**: Python web framework for routing and request handling\n- **Werkzeug ProxyFix**: Middleware for handling proxy headers in production deployments\n\n## Development Tools\n- **Python 3.8+**: Core runtime environment\n- **Logging**: Built-in Python logging for debugging and monitoring","size_bytes":2878},"web_server.py":{"content":"from flask import Flask, render_template, jsonify, request\nfrom dashboard_manager import DashboardManager\nfrom data_sources import DataSourceManager\nimport logging\n\nlogger = logging.getLogger(__name__)\n\ndef create_app():\n    app = Flask(__name__)\n    \n    # Initialize managers\n    dashboard_manager = DashboardManager()\n    data_source_manager = DataSourceManager()\n    \n    # Airport configurations\n    airports = {\n        'DEL': {'name': 'Indira Gandhi International Airport', 'city': 'New Delhi', 'code': 'DEL'},\n        'BLR': {'name': 'Kempegowda International Airport', 'city': 'Bangalore', 'code': 'BLR'},\n        'GOX': {'name': 'Manohar International Airport', 'city': 'Goa', 'code': 'GOX'},\n        'PNY': {'name': 'Puducherry Airport', 'city': 'Puducherry', 'code': 'PNY'},\n        'IXJ': {'name': 'Jammu Airport', 'city': 'Jammu', 'code': 'IXJ'},\n        'SXR': {'name': 'Sheikh ul-Alam International Airport', 'city': 'Srinagar', 'code': 'SXR'}\n    }\n    \n    @app.route('/')\n    def index():\n        \"\"\"Main page showing airport selection grid\"\"\"\n        return render_template('index.html', airports=airports)\n    \n    @app.route('/dashboard/<airport_code>')\n    def dashboard(airport_code):\n        \"\"\"Individual airport dashboard\"\"\"\n        if airport_code not in airports:\n            return \"Airport not found\", 404\n        \n        airport_info = airports[airport_code]\n        return render_template('dashboard.html', \n                             airport=airport_info, \n                             airport_code=airport_code)\n    \n    @app.route('/settings')\n    def settings():\n        \"\"\"Settings and configuration page\"\"\"\n        return render_template('settings.html', airports=airports)\n    \n    # API Endpoints\n    @app.route('/api/airport/<airport_code>/passenger-flow')\n    def get_passenger_flow(airport_code):\n        \"\"\"Get passenger flow data for charts\"\"\"\n        try:\n            data = data_source_manager.get_passenger_flow_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting passenger flow data: {e}\")\n            return jsonify({'error': 'Failed to fetch passenger flow data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/queue-status')\n    def get_queue_status(airport_code):\n        \"\"\"Get queue monitoring data\"\"\"\n        try:\n            data = data_source_manager.get_queue_status_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting queue status data: {e}\")\n            return jsonify({'error': 'Failed to fetch queue status data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/baggage-tracking')\n    def get_baggage_tracking(airport_code):\n        \"\"\"Get baggage tracking data\"\"\"\n        try:\n            data = data_source_manager.get_baggage_tracking_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting baggage tracking data: {e}\")\n            return jsonify({'error': 'Failed to fetch baggage tracking data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/flight-status')\n    def get_flight_status(airport_code):\n        \"\"\"Get flight status data\"\"\"\n        try:\n            data = data_source_manager.get_flight_status_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting flight status data: {e}\")\n            return jsonify({'error': 'Failed to fetch flight status data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/security-status')\n    def get_security_status(airport_code):\n        \"\"\"Get security checkpoint status\"\"\"\n        try:\n            data = data_source_manager.get_security_status_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting security status data: {e}\")\n            return jsonify({'error': 'Failed to fetch security status data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/resource-utilization')\n    def get_resource_utilization(airport_code):\n        \"\"\"Get resource utilization data\"\"\"\n        try:\n            data = data_source_manager.get_resource_utilization_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting resource utilization data: {e}\")\n            return jsonify({'error': 'Failed to fetch resource utilization data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/staff-availability')\n    def get_staff_availability(airport_code):\n        \"\"\"Get staff availability data\"\"\"\n        try:\n            data = data_source_manager.get_staff_availability_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting staff availability data: {e}\")\n            return jsonify({'error': 'Failed to fetch staff availability data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/dashboard-data')\n    def get_dashboard_data(airport_code):\n        \"\"\"Get all dashboard data at once\"\"\"\n        try:\n            data = {\n                'passenger_flow': data_source_manager.get_passenger_flow_data(airport_code),\n                'queue_status': data_source_manager.get_queue_status_data(airport_code),\n                'baggage_tracking': data_source_manager.get_baggage_tracking_data(airport_code),\n                'flight_status': data_source_manager.get_flight_status_data(airport_code),\n                'security_status': data_source_manager.get_security_status_data(airport_code),\n                'resource_utilization': data_source_manager.get_resource_utilization_data(airport_code),\n                'staff_availability': data_source_manager.get_staff_availability_data(airport_code)\n            }\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting dashboard data: {e}\")\n            return jsonify({'error': 'Failed to fetch dashboard data'}), 500\n    \n    # New Enhanced API Endpoints\n    @app.route('/api/airport/<airport_code>/weather')\n    def get_weather(airport_code):\n        \"\"\"Get weather data\"\"\"\n        try:\n            data = data_source_manager.get_weather_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting weather data: {e}\")\n            return jsonify({'error': 'Failed to fetch weather data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/live-conveyors')\n    def get_live_conveyors(airport_code):\n        \"\"\"Get live conveyor belt data\"\"\"\n        try:\n            data = data_source_manager.get_live_conveyor_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting live conveyor data: {e}\")\n            return jsonify({'error': 'Failed to fetch live conveyor data'}), 500\n    \n    @app.route('/api/airport/<airport_code>/facilities')\n    def get_facilities(airport_code):\n        \"\"\"Get airport facilities information\"\"\"\n        try:\n            data = data_source_manager.get_airport_facilities(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting facilities data: {e}\")\n            return jsonify({'error': 'Failed to fetch facilities data'}), 500\n    \n    @app.route('/api/baggage/track')\n    def track_baggage():\n        \"\"\"Track passenger baggage\"\"\"\n        try:\n            bag_id = request.args.get('bag_id')\n            flight_number = request.args.get('flight_number')\n            data = data_source_manager.track_passenger_baggage(bag_id, flight_number)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error tracking baggage: {e}\")\n            return jsonify({'error': 'Failed to track baggage'}), 500\n    \n    @app.route('/api/complaints/submit', methods=['POST'])\n    def submit_complaint():\n        \"\"\"Submit baggage complaint\"\"\"\n        try:\n            request_data = request.get_json()\n            data = data_source_manager.submit_baggage_complaint(\n                request_data.get('passenger_name', ''),\n                request_data.get('flight_number', ''),\n                request_data.get('bag_id', ''),\n                request_data.get('issue_type', ''),\n                request_data.get('description', '')\n            )\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error submitting complaint: {e}\")\n            return jsonify({'error': 'Failed to submit complaint'}), 500\n    \n    @app.route('/api/airport/<airport_code>/complaints')\n    def get_complaints(airport_code):\n        \"\"\"Get complaints data for staff\"\"\"\n        try:\n            data = data_source_manager.get_complaints_data(airport_code)\n            return jsonify(data)\n        except Exception as e:\n            logger.error(f\"Error getting complaints data: {e}\")\n            return jsonify({'error': 'Failed to fetch complaints data'}), 500\n    \n    # Passenger Services Pages\n    @app.route('/passenger')\n    def passenger_services():\n        \"\"\"Passenger services page\"\"\"\n        return render_template('passenger_services.html', airports=airports)\n    \n    @app.route('/staff')\n    def staff_portal():\n        \"\"\"Staff portal page\"\"\"\n        return render_template('staff_portal.html', airports=airports)\n    \n    @app.errorhandler(404)\n    def not_found(error):\n        return render_template('index.html', error=\"Page not found\"), 404\n    \n    @app.errorhandler(500)\n    def internal_error(error):\n        logger.error(f\"Internal server error: {error}\")\n        return jsonify({'error': 'Internal server error'}), 500\n    \n    return app\n","size_bytes":9751},"static/css/styles.css":{"content":"/* Root Variables */\n:root {\n    --primary-color: #3b82f6;\n    --secondary-color: #64748b;\n    --success-color: #10b981;\n    --warning-color: #f59e0b;\n    --danger-color: #ef4444;\n    --info-color: #06b6d4;\n    --light-color: #f8fafc;\n    --dark-color: #1e293b;\n    --background-color: #ffffff;\n    --surface-color: #f8fafc;\n    --text-color: #1e293b;\n    --text-muted: #64748b;\n    --border-color: #e2e8f0;\n    --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n    --border-radius: 0.5rem;\n    --transition: all 0.3s ease;\n}\n\n/* Dark Theme Variables */\n[data-theme=\"dark\"] {\n    --background-color: #0f172a;\n    --surface-color: #1e293b;\n    --text-color: #f8fafc;\n    --text-muted: #94a3b8;\n    --border-color: #334155;\n    --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);\n}\n\n/* Base Styles */\n* {\n    box-sizing: border-box;\n}\n\nbody {\n    background-color: var(--background-color);\n    color: var(--text-color);\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    transition: var(--transition);\n    line-height: 1.6;\n}\n\n.container-fluid {\n    background-color: var(--background-color);\n}\n\n/* Cards and Surfaces */\n.card {\n    background-color: var(--surface-color);\n    border: 1px solid var(--border-color);\n    border-radius: var(--border-radius);\n    box-shadow: var(--shadow);\n    transition: var(--transition);\n}\n\n.card:hover {\n    box-shadow: var(--shadow-lg);\n    transform: translateY(-2px);\n}\n\n/* Airport Cards */\n.airport-card {\n    cursor: pointer;\n    transition: var(--transition);\n    border: 2px solid transparent;\n    background: linear-gradient(135deg, var(--surface-color) 0%, var(--light-color) 100%);\n}\n\n.airport-card:hover {\n    border-color: var(--primary-color);\n    transform: translateY(-5px);\n    box-shadow: var(--shadow-lg);\n}\n\n[data-theme=\"dark\"] .airport-card {\n    background: linear-gradient(135deg, var(--surface-color) 0%, #334155 100%);\n}\n\n.airport-icon {\n    opacity: 0.8;\n    transition: var(--transition);\n}\n\n.airport-card:hover .airport-icon {\n    opacity: 1;\n    transform: scale(1.1);\n}\n\n.airport-status .badge {\n    font-size: 0.75rem;\n    padding: 0.25rem 0.5rem;\n}\n\n/* Feature Cards */\n.feature-card {\n    padding: 2rem;\n    border-radius: var(--border-radius);\n    background-color: var(--surface-color);\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n}\n\n.feature-card:hover {\n    transform: translateY(-3px);\n    box-shadow: var(--shadow-lg);\n}\n\n/* Dashboard Grid */\n.dashboard-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    padding: 1rem 0;\n}\n\n@media (max-width: 768px) {\n    .dashboard-grid {\n        grid-template-columns: 1fr;\n        gap: 1rem;\n    }\n}\n\n/* Dashboard Widgets */\n.dashboard-widget {\n    background-color: var(--surface-color);\n    border: 1px solid var(--border-color);\n    border-radius: var(--border-radius);\n    box-shadow: var(--shadow);\n    transition: var(--transition);\n    overflow: hidden;\n}\n\n.dashboard-widget:hover {\n    box-shadow: var(--shadow-lg);\n    transform: translateY(-2px);\n}\n\n.widget-large {\n    grid-column: span 2;\n}\n\n@media (max-width: 768px) {\n    .widget-large {\n        grid-column: span 1;\n    }\n}\n\n.widget-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 1rem 1.5rem;\n    background: linear-gradient(90deg, var(--primary-color), #60a5fa);\n    color: white;\n    border-bottom: 1px solid var(--border-color);\n}\n\n.widget-header h5 {\n    margin: 0;\n    font-weight: 600;\n}\n\n.widget-controls {\n    display: flex;\n    gap: 0.5rem;\n}\n\n.widget-controls .btn {\n    border-color: rgba(255, 255, 255, 0.3);\n    color: white;\n    padding: 0.25rem 0.5rem;\n}\n\n.widget-controls .btn:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    border-color: rgba(255, 255, 255, 0.5);\n}\n\n.widget-content {\n    padding: 1.5rem;\n}\n\n/* Chart Containers */\n.chart-container {\n    height: 300px;\n    margin-bottom: 1rem;\n}\n\n.chart-container-small {\n    height: 200px;\n}\n\n/* Widget Metrics */\n.widget-metrics {\n    display: flex;\n    justify-content: space-around;\n    padding-top: 1rem;\n    border-top: 1px solid var(--border-color);\n    margin-top: 1rem;\n}\n\n.metric {\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n}\n\n.metric-label {\n    font-size: 0.875rem;\n    color: var(--text-muted);\n    margin-bottom: 0.25rem;\n}\n\n.metric-value {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--primary-color);\n}\n\n/* Dashboard Status Bar */\n.dashboard-status-bar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: var(--surface-color);\n    border: 1px solid var(--border-color);\n    border-radius: var(--border-radius);\n    padding: 1rem 1.5rem;\n    margin-bottom: 1rem;\n    flex-wrap: wrap;\n    gap: 1rem;\n}\n\n.status-item {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n}\n\n.status-indicator {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    display: inline-block;\n}\n\n.status-indicator.online {\n    background-color: var(--success-color);\n    animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n    0% { opacity: 1; }\n    50% { opacity: 0.5; }\n    100% { opacity: 1; }\n}\n\n/* Tables */\n.table {\n    color: var(--text-color);\n    background-color: var(--surface-color);\n}\n\n.table th {\n    background-color: var(--light-color);\n    border-bottom: 2px solid var(--border-color);\n    font-weight: 600;\n    font-size: 0.875rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n[data-theme=\"dark\"] .table th {\n    background-color: var(--dark-color);\n}\n\n.table td {\n    border-bottom: 1px solid var(--border-color);\n    vertical-align: middle;\n}\n\n.table-hover tbody tr:hover {\n    background-color: var(--light-color);\n}\n\n[data-theme=\"dark\"] .table-hover tbody tr:hover {\n    background-color: #334155;\n}\n\n/* Badges */\n.badge {\n    font-size: 0.75rem;\n    padding: 0.35rem 0.65rem;\n    border-radius: 0.375rem;\n}\n\n/* Loading States */\n.loading-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 9999;\n}\n\n.loading-overlay.show {\n    display: flex;\n}\n\n.loading-spinner {\n    text-align: center;\n    color: white;\n}\n\n.loading-spinner i {\n    margin-bottom: 1rem;\n}\n\n/* Buttons */\n.btn {\n    border-radius: var(--border-radius);\n    font-weight: 500;\n    transition: var(--transition);\n    border: none;\n    padding: 0.5rem 1rem;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, var(--primary-color), #60a5fa);\n    color: white;\n}\n\n.btn-primary:hover {\n    background: linear-gradient(135deg, #2563eb, var(--primary-color));\n    transform: translateY(-1px);\n    box-shadow: var(--shadow);\n}\n\n.btn-outline-primary {\n    border: 1px solid var(--primary-color);\n    color: var(--primary-color);\n    background: transparent;\n}\n\n.btn-outline-primary:hover {\n    background-color: var(--primary-color);\n    color: white;\n    transform: translateY(-1px);\n}\n\n/* Navigation */\n.navbar {\n    box-shadow: var(--shadow);\n    border-bottom: 1px solid var(--border-color);\n}\n\n.navbar-brand {\n    font-weight: 600;\n    font-size: 1.25rem;\n}\n\n/* Forms */\n.form-control, .form-select {\n    background-color: var(--surface-color);\n    border: 1px solid var(--border-color);\n    color: var(--text-color);\n    border-radius: var(--border-radius);\n    transition: var(--transition);\n}\n\n.form-control:focus, .form-select:focus {\n    background-color: var(--surface-color);\n    border-color: var(--primary-color);\n    color: var(--text-color);\n    box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);\n}\n\n.form-label {\n    font-weight: 500;\n    color: var(--text-color);\n}\n\n/* Settings Page */\n.nav-tabs {\n    border-bottom: 1px solid var(--border-color);\n}\n\n.nav-tabs .nav-link {\n    color: var(--text-muted);\n    border: 1px solid transparent;\n    transition: var(--transition);\n}\n\n.nav-tabs .nav-link:hover {\n    border-color: var(--border-color);\n    color: var(--text-color);\n}\n\n.nav-tabs .nav-link.active {\n    color: var(--primary-color);\n    background-color: var(--surface-color);\n    border-color: var(--border-color) var(--border-color) transparent;\n}\n\n.system-info .info-item {\n    padding: 0.5rem 0;\n    border-bottom: 1px solid var(--border-color);\n}\n\n.system-info .info-item:last-child {\n    border-bottom: none;\n}\n\n.airport-stats .stat-item {\n    padding: 0.75rem;\n    background-color: var(--light-color);\n    border-radius: var(--border-radius);\n    margin-bottom: 0.5rem;\n    border: 1px solid var(--border-color);\n}\n\n[data-theme=\"dark\"] .airport-stats .stat-item {\n    background-color: var(--dark-color);\n}\n\n/* Progress Bars */\n.progress {\n    background-color: var(--light-color);\n    border-radius: var(--border-radius);\n}\n\n[data-theme=\"dark\"] .progress {\n    background-color: var(--dark-color);\n}\n\n/* Fullscreen Widget */\n.widget-fullscreen {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 9998;\n    background-color: var(--background-color);\n    overflow: auto;\n}\n\n.widget-fullscreen .widget-content {\n    padding: 2rem;\n}\n\n.widget-fullscreen .chart-container {\n    height: calc(100vh - 200px);\n}\n\n/* Responsive Design */\n@media (max-width: 576px) {\n    .dashboard-status-bar {\n        flex-direction: column;\n        align-items: flex-start;\n    }\n    \n    .widget-metrics {\n        flex-direction: column;\n        gap: 1rem;\n    }\n    \n    .metric {\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: center;\n    }\n    \n    .navbar-nav {\n        flex-direction: row;\n        gap: 0.5rem;\n    }\n}\n\n/* Animation Classes */\n.fade-in {\n    animation: fadeIn 0.5s ease-in-out;\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.slide-in {\n    animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n    from { transform: translateX(-100%); }\n    to { transform: translateX(0); }\n}\n\n/* Custom Scrollbar */\n::-webkit-scrollbar {\n    width: 8px;\n}\n\n::-webkit-scrollbar-track {\n    background: var(--light-color);\n}\n\n::-webkit-scrollbar-thumb {\n    background: var(--border-color);\n    border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n    background: var(--text-muted);\n}\n\n[data-theme=\"dark\"] ::-webkit-scrollbar-track {\n    background: var(--dark-color);\n}\n\n/* Accessibility */\n@media (prefers-reduced-motion: reduce) {\n    *, *::before, *::after {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n    }\n}\n\n/* Focus styles for accessibility */\n.btn:focus, .form-control:focus, .form-select:focus {\n    outline: 2px solid var(--primary-color);\n    outline-offset: 2px;\n}\n\n/* Print styles */\n@media print {\n    .navbar, .widget-controls, .dashboard-status-bar {\n        display: none !important;\n    }\n    \n    .dashboard-widget {\n        break-inside: avoid;\n        margin-bottom: 1rem;\n    }\n    \n    body {\n        background: white !important;\n        color: black !important;\n    }\n}\n","size_bytes":11301},"static/js/dashboard.js":{"content":"// Dashboard JavaScript\nclass AirportDashboard {\n    constructor(airportCode) {\n        this.airportCode = airportCode;\n        this.refreshInterval = 30000; // 30 seconds\n        this.autoRefreshTimer = null;\n        this.isLoading = false;\n        this.widgets = [\n            'passenger-flow',\n            'queue-status', \n            'baggage-tracking',\n            'flight-status',\n            'security-status',\n            'resource-utilization',\n            'staff-availability'\n        ];\n        \n        this.init();\n    }\n\n    init() {\n        this.loadDashboardData();\n        this.setupAutoRefresh();\n        this.setupEventListeners();\n        this.loadUserPreferences();\n    }\n\n    setupEventListeners() {\n        // Theme toggle\n        const themeToggle = document.getElementById('theme-icon');\n        if (themeToggle) {\n            themeToggle.addEventListener('click', this.toggleTheme.bind(this));\n        }\n\n        // Window resize handler\n        window.addEventListener('resize', this.handleResize.bind(this));\n        \n        // Visibility change handler for auto-refresh\n        document.addEventListener('visibilitychange', this.handleVisibilityChange.bind(this));\n    }\n\n    loadUserPreferences() {\n        // Load saved theme\n        const savedTheme = localStorage.getItem('theme');\n        const icon = document.getElementById('theme-icon');\n        \n        if (savedTheme === 'dark') {\n            document.body.setAttribute('data-theme', 'dark');\n            if (icon) icon.className = 'fas fa-sun';\n        }\n\n        // Load refresh interval preference\n        const savedInterval = localStorage.getItem('refresh-interval');\n        if (savedInterval) {\n            this.refreshInterval = parseInt(savedInterval) * 1000;\n        }\n    }\n\n    toggleTheme() {\n        const body = document.body;\n        const icon = document.getElementById('theme-icon');\n        \n        if (body.getAttribute('data-theme') === 'dark') {\n            body.removeAttribute('data-theme');\n            icon.className = 'fas fa-moon';\n            localStorage.setItem('theme', 'light');\n        } else {\n            body.setAttribute('data-theme', 'dark');\n            icon.className = 'fas fa-sun';\n            localStorage.setItem('theme', 'dark');\n        }\n    }\n\n    showLoading() {\n        const overlay = document.getElementById('loading-overlay');\n        if (overlay) {\n            overlay.classList.add('show');\n        }\n        this.isLoading = true;\n    }\n\n    hideLoading() {\n        const overlay = document.getElementById('loading-overlay');\n        if (overlay) {\n            overlay.classList.remove('show');\n        }\n        this.isLoading = false;\n    }\n\n    updateLastUpdateTime() {\n        const updateElement = document.getElementById('last-update');\n        if (updateElement) {\n            updateElement.textContent = `Last updated: ${new Date().toLocaleTimeString()}`;\n        }\n    }\n\n    async loadDashboardData() {\n        if (this.isLoading) return;\n        \n        this.showLoading();\n        \n        try {\n            const response = await fetch(`/api/airport/${this.airportCode}/dashboard-data`);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            \n            const data = await response.json();\n            \n            if (data.error) {\n                throw new Error(data.error);\n            }\n            \n            // Update all widgets\n            this.updatePassengerFlowWidget(data.passenger_flow);\n            this.updateQueueStatusWidget(data.queue_status);\n            this.updateBaggageTrackingWidget(data.baggage_tracking);\n            this.updateFlightStatusWidget(data.flight_status);\n            this.updateSecurityStatusWidget(data.security_status);\n            this.updateResourceUtilizationWidget(data.resource_utilization);\n            this.updateStaffAvailabilityWidget(data.staff_availability);\n            \n            this.updateLastUpdateTime();\n            \n        } catch (error) {\n            console.error('Error loading dashboard data:', error);\n            this.showError('Failed to load dashboard data. Please try again.');\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    updatePassengerFlowWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('passenger-flow-chart', 'Failed to load passenger flow data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 40, l: 40 },\n            responsive: true\n        };\n\n        Plotly.newPlot('passenger-flow-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('current-passengers', data.current_hour_passengers);\n        this.updateElement('peak-hour', data.peak_hour);\n        this.updateElement('daily-total', data.total_daily?.toLocaleString() || '-');\n    }\n\n    updateQueueStatusWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('queue-status-chart', 'Failed to load queue status data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 60, l: 40 },\n            responsive: true\n        };\n\n        Plotly.newPlot('queue-status-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('total-queues', data.total_in_queues);\n        this.updateElement('avg-wait', `${Math.round(data.avg_wait_time_overall)} min`);\n    }\n\n    updateBaggageTrackingWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('baggage-tracking-chart', 'Failed to load baggage tracking data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 30, l: 30 },\n            responsive: true\n        };\n\n        Plotly.newPlot('baggage-tracking-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('active-belts', `${data.active_belts}/${data.total_belts}`);\n        this.updateElement('bags-processed', data.total_bags_processed?.toLocaleString() || '-');\n    }\n\n    updateFlightStatusWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('flight-status-chart', 'Failed to load flight status data');\n            return;\n        }\n\n        // Update table\n        const tbody = document.getElementById('flights-tbody');\n        if (tbody && data.flights) {\n            tbody.innerHTML = '';\n            \n            data.flights.slice(0, 8).forEach(flight => {\n                const row = document.createElement('tr');\n                \n                const statusBadge = this.getStatusBadge(flight.status);\n                \n                row.innerHTML = `\n                    <td><strong>${flight.flight_number}</strong><br><small class=\"text-muted\">${flight.airline}</small></td>\n                    <td>${flight.destination}</td>\n                    <td>${flight.scheduled_time}</td>\n                    <td>${statusBadge}</td>\n                    <td>${flight.gate}</td>\n                `;\n                \n                tbody.appendChild(row);\n            });\n        }\n\n        // Update chart\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 30, l: 30 },\n            showlegend: true,\n            legend: { orientation: 'v', x: 1, y: 1 }\n        };\n\n        Plotly.newPlot('flight-status-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n    }\n\n    updateSecurityStatusWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('security-status-chart', 'Failed to load security status data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 30, l: 30 },\n            responsive: true\n        };\n\n        Plotly.newPlot('security-status-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('operational-checkpoints', `${data.operational_checkpoints}/${data.total_checkpoints}`);\n        this.updateElement('security-staff', data.total_staff_deployed);\n    }\n\n    updateResourceUtilizationWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('resource-utilization-chart', 'Failed to load resource utilization data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 30, l: 30 },\n            responsive: true\n        };\n\n        Plotly.newPlot('resource-utilization-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('system-health', data.overall_health);\n        this.updateElement('peak-usage', `${data.peak_usage}%`);\n    }\n\n    updateStaffAvailabilityWidget(data) {\n        if (!data || data.error) {\n            this.showWidgetError('staff-availability-chart', 'Failed to load staff availability data');\n            return;\n        }\n\n        const layout = {\n            ...data.layout,\n            plot_bgcolor: 'transparent',\n            paper_bgcolor: 'transparent',\n            font: { color: getComputedStyle(document.body).color },\n            margin: { t: 30, r: 30, b: 60, l: 40 },\n            responsive: true\n        };\n\n        Plotly.newPlot('staff-availability-chart', [data.chart], layout, {\n            responsive: true,\n            displayModeBar: false\n        });\n\n        // Update metrics\n        this.updateElement('available-staff', `${data.available_staff}/${data.total_staff}`);\n        this.updateElement('overall-availability', `${data.overall_availability}%`);\n    }\n\n    getStatusBadge(status) {\n        const badgeClasses = {\n            'On Time': 'badge bg-success',\n            'Delayed': 'badge bg-warning',\n            'Boarding': 'badge bg-info',\n            'Departed': 'badge bg-secondary',\n            'Cancelled': 'badge bg-danger',\n            'Arrived': 'badge bg-primary'\n        };\n        \n        const className = badgeClasses[status] || 'badge bg-secondary';\n        return `<span class=\"${className}\">${status}</span>`;\n    }\n\n    updateElement(id, value) {\n        const element = document.getElementById(id);\n        if (element) {\n            element.textContent = value;\n        }\n    }\n\n    showWidgetError(chartId, message) {\n        const chartElement = document.getElementById(chartId);\n        if (chartElement) {\n            chartElement.innerHTML = `\n                <div class=\"alert alert-warning\" role=\"alert\">\n                    <i class=\"fas fa-exclamation-triangle me-2\"></i>\n                    ${message}\n                </div>\n            `;\n        }\n    }\n\n    showError(message) {\n        // Create and show error notification\n        const notification = document.createElement('div');\n        notification.className = 'alert alert-danger alert-dismissible fade show position-fixed';\n        notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';\n        notification.innerHTML = `\n            <i class=\"fas fa-exclamation-triangle me-2\"></i>\n            ${message}\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n        `;\n        \n        document.body.appendChild(notification);\n        \n        // Auto-remove after 5 seconds\n        setTimeout(() => {\n            if (notification.parentNode) {\n                notification.parentNode.removeChild(notification);\n            }\n        }, 5000);\n    }\n\n    setupAutoRefresh() {\n        if (this.refreshInterval > 0) {\n            this.autoRefreshTimer = setInterval(() => {\n                if (!document.hidden) {\n                    this.loadDashboardData();\n                }\n            }, this.refreshInterval);\n        }\n    }\n\n    handleVisibilityChange() {\n        if (document.hidden) {\n            // Page is hidden, pause auto-refresh\n            if (this.autoRefreshTimer) {\n                clearInterval(this.autoRefreshTimer);\n                this.autoRefreshTimer = null;\n            }\n        } else {\n            // Page is visible, resume auto-refresh\n            this.setupAutoRefresh();\n            this.loadDashboardData();\n        }\n    }\n\n    handleResize() {\n        // Redraw all charts on resize\n        const chartIds = [\n            'passenger-flow-chart',\n            'queue-status-chart',\n            'baggage-tracking-chart',\n            'flight-status-chart',\n            'security-status-chart',\n            'resource-utilization-chart',\n            'staff-availability-chart'\n        ];\n\n        chartIds.forEach(id => {\n            const element = document.getElementById(id);\n            if (element && element.data) {\n                Plotly.Plots.resize(element);\n            }\n        });\n    }\n\n    async refreshWidget(widgetType) {\n        try {\n            const response = await fetch(`/api/airport/${this.airportCode}/${widgetType}`);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            \n            const data = await response.json();\n            \n            // Update specific widget based on type\n            switch (widgetType) {\n                case 'passenger-flow':\n                    this.updatePassengerFlowWidget(data);\n                    break;\n                case 'queue-status':\n                    this.updateQueueStatusWidget(data);\n                    break;\n                case 'baggage-tracking':\n                    this.updateBaggageTrackingWidget(data);\n                    break;\n                case 'flight-status':\n                    this.updateFlightStatusWidget(data);\n                    break;\n                case 'security-status':\n                    this.updateSecurityStatusWidget(data);\n                    break;\n                case 'resource-utilization':\n                    this.updateResourceUtilizationWidget(data);\n                    break;\n                case 'staff-availability':\n                    this.updateStaffAvailabilityWidget(data);\n                    break;\n            }\n            \n        } catch (error) {\n            console.error(`Error refreshing ${widgetType} widget:`, error);\n            this.showError(`Failed to refresh ${widgetType} data.`);\n        }\n    }\n\n    destroy() {\n        if (this.autoRefreshTimer) {\n            clearInterval(this.autoRefreshTimer);\n        }\n        \n        window.removeEventListener('resize', this.handleResize.bind(this));\n        document.removeEventListener('visibilitychange', this.handleVisibilityChange.bind(this));\n    }\n}\n\n// Global functions for widget controls\nfunction refreshWidget(widgetType) {\n    if (window.dashboardInstance) {\n        window.dashboardInstance.refreshWidget(widgetType);\n    }\n}\n\nfunction refreshAllData() {\n    if (window.dashboardInstance) {\n        window.dashboardInstance.loadDashboardData();\n    }\n}\n\nfunction toggleFullscreen(button) {\n    const widget = button.closest('.dashboard-widget');\n    const icon = button.querySelector('i');\n    \n    if (widget.classList.contains('widget-fullscreen')) {\n        // Exit fullscreen\n        widget.classList.remove('widget-fullscreen');\n        icon.className = 'fas fa-expand';\n        document.body.style.overflow = '';\n    } else {\n        // Enter fullscreen\n        widget.classList.add('widget-fullscreen');\n        icon.className = 'fas fa-compress';\n        document.body.style.overflow = 'hidden';\n    }\n    \n    // Trigger resize after animation\n    setTimeout(() => {\n        if (window.dashboardInstance) {\n            window.dashboardInstance.handleResize();\n        }\n    }, 300);\n}\n\n// Initialize dashboard when called from HTML\nfunction initializeDashboard(airportCode) {\n    window.dashboardInstance = new AirportDashboard(airportCode);\n}\n\n// Cleanup on page unload\nwindow.addEventListener('beforeunload', () => {\n    if (window.dashboardInstance) {\n        window.dashboardInstance.destroy();\n    }\n});\n","size_bytes":17357},"static/js/settings.js":{"content":"// Settings Page JavaScript\nclass SettingsManager {\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.loadSettings();\n        this.setupEventListeners();\n    }\n\n    setupEventListeners() {\n        // Dashboard settings form\n        const dashboardForm = document.getElementById('dashboard-settings-form');\n        if (dashboardForm) {\n            dashboardForm.addEventListener('submit', this.saveDashboardSettings.bind(this));\n        }\n\n        // Load current settings into form\n        this.loadFormValues();\n    }\n\n    loadSettings() {\n        // Load settings from localStorage\n        const settings = {\n            refreshInterval: localStorage.getItem('refresh-interval') || '30',\n            theme: localStorage.getItem('theme') || 'light',\n            enableAnimations: localStorage.getItem('enable-animations') !== 'false',\n            enableNotifications: localStorage.getItem('enable-notifications') !== 'false'\n        };\n\n        return settings;\n    }\n\n    loadFormValues() {\n        const settings = this.loadSettings();\n\n        // Set form values\n        const refreshInterval = document.getElementById('refresh-interval');\n        if (refreshInterval) {\n            refreshInterval.value = settings.refreshInterval;\n        }\n\n        const defaultTheme = document.getElementById('default-theme');\n        if (defaultTheme) {\n            defaultTheme.value = settings.theme;\n        }\n\n        const enableAnimations = document.getElementById('enable-animations');\n        if (enableAnimations) {\n            enableAnimations.checked = settings.enableAnimations;\n        }\n\n        const enableNotifications = document.getElementById('enable-notifications');\n        if (enableNotifications) {\n            enableNotifications.checked = settings.enableNotifications;\n        }\n    }\n\n    saveDashboardSettings(event) {\n        event.preventDefault();\n\n        // Get form values\n        const refreshInterval = document.getElementById('refresh-interval').value;\n        const defaultTheme = document.getElementById('default-theme').value;\n        const enableAnimations = document.getElementById('enable-animations').checked;\n        const enableNotifications = document.getElementById('enable-notifications').checked;\n\n        // Save to localStorage\n        localStorage.setItem('refresh-interval', refreshInterval);\n        localStorage.setItem('theme', defaultTheme);\n        localStorage.setItem('enable-animations', enableAnimations);\n        localStorage.setItem('enable-notifications', enableNotifications);\n\n        // Apply theme immediately if changed\n        this.applyTheme(defaultTheme);\n\n        // Show success message\n        this.showNotification('Settings saved successfully!', 'success');\n    }\n\n    applyTheme(theme) {\n        const body = document.body;\n        const icon = document.getElementById('theme-icon');\n\n        if (theme === 'dark') {\n            body.setAttribute('data-theme', 'dark');\n            if (icon) icon.className = 'fas fa-sun';\n        } else if (theme === 'light') {\n            body.removeAttribute('data-theme');\n            if (icon) icon.className = 'fas fa-moon';\n        } else if (theme === 'auto') {\n            // Use system preference\n            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n            if (prefersDark) {\n                body.setAttribute('data-theme', 'dark');\n                if (icon) icon.className = 'fas fa-sun';\n            } else {\n                body.removeAttribute('data-theme');\n                if (icon) icon.className = 'fas fa-moon';\n            }\n        }\n    }\n\n    showNotification(message, type = 'info') {\n        // Create notification element\n        const notification = document.createElement('div');\n        notification.className = `alert alert-${type} alert-dismissible fade show position-fixed`;\n        notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';\n        \n        const iconClass = {\n            'success': 'fas fa-check-circle',\n            'warning': 'fas fa-exclamation-triangle',\n            'danger': 'fas fa-exclamation-circle',\n            'info': 'fas fa-info-circle'\n        }[type] || 'fas fa-info-circle';\n\n        notification.innerHTML = `\n            <i class=\"${iconClass} me-2\"></i>\n            ${message}\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n        `;\n\n        document.body.appendChild(notification);\n\n        // Auto-remove after 3 seconds\n        setTimeout(() => {\n            if (notification.parentNode) {\n                notification.parentNode.removeChild(notification);\n            }\n        }, 3000);\n    }\n}\n\n// System action functions\nfunction performSystemAction(action) {\n    const settingsManager = window.settingsManager;\n    \n    switch (action) {\n        case 'refresh':\n            settingsManager.showNotification('Refreshing all data sources...', 'info');\n            // Simulate refresh action\n            setTimeout(() => {\n                settingsManager.showNotification('All data sources refreshed successfully!', 'success');\n            }, 2000);\n            break;\n            \n        case 'backup':\n            settingsManager.showNotification('Creating system backup...', 'info');\n            // Simulate backup action\n            setTimeout(() => {\n                settingsManager.showNotification('System backup created successfully!', 'success');\n            }, 3000);\n            break;\n            \n        case 'clear-cache':\n            settingsManager.showNotification('Clearing cache...', 'info');\n            // Clear localStorage cache\n            const keysToKeep = ['theme', 'refresh-interval', 'enable-animations', 'enable-notifications'];\n            const allKeys = Object.keys(localStorage);\n            \n            allKeys.forEach(key => {\n                if (!keysToKeep.includes(key)) {\n                    localStorage.removeItem(key);\n                }\n            });\n            \n            setTimeout(() => {\n                settingsManager.showNotification('Cache cleared successfully!', 'success');\n            }, 1000);\n            break;\n            \n        default:\n            settingsManager.showNotification('Unknown action', 'warning');\n    }\n}\n\nfunction downloadLogs() {\n    const settingsManager = window.settingsManager;\n    \n    // Generate mock log data\n    const logData = generateMockLogs();\n    const blob = new Blob([logData], { type: 'text/plain' });\n    const url = window.URL.createObjectURL(blob);\n    \n    // Create download link\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `airport-dashboard-logs-${new Date().toISOString().split('T')[0]}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n    \n    settingsManager.showNotification('System logs downloaded successfully!', 'success');\n}\n\nfunction generateMockLogs() {\n    const now = new Date();\n    const logs = [];\n    \n    // Generate last 24 hours of logs\n    for (let i = 0; i < 24; i++) {\n        const logTime = new Date(now.getTime() - (i * 60 * 60 * 1000));\n        const timeString = logTime.toISOString();\n        \n        logs.push(`[${timeString}] INFO: Dashboard data refreshed successfully`);\n        logs.push(`[${timeString}] INFO: ${Math.floor(Math.random() * 100) + 50} passengers processed`);\n        \n        if (Math.random() > 0.8) {\n            logs.push(`[${timeString}] WARN: Queue length exceeding normal thresholds`);\n        }\n        \n        if (Math.random() > 0.95) {\n            logs.push(`[${timeString}] ERROR: Temporary connection issue with baggage system`);\n        }\n    }\n    \n    return logs.reverse().join('\\n');\n}\n\n// Test data source connection\nfunction testDataSource(sourceName) {\n    const settingsManager = window.settingsManager;\n    \n    settingsManager.showNotification(`Testing connection to ${sourceName}...`, 'info');\n    \n    // Simulate connection test\n    setTimeout(() => {\n        const success = Math.random() > 0.1; // 90% success rate\n        \n        if (success) {\n            settingsManager.showNotification(`${sourceName} connection test successful!`, 'success');\n        } else {\n            settingsManager.showNotification(`${sourceName} connection test failed!`, 'danger');\n        }\n    }, 1500);\n}\n\n// Initialize settings manager when page loads\ndocument.addEventListener('DOMContentLoaded', function() {\n    window.settingsManager = new SettingsManager();\n    \n    // Update system info periodically\n    updateSystemInfo();\n    setInterval(updateSystemInfo, 60000); // Update every minute\n});\n\nfunction updateSystemInfo() {\n    // Update uptime\n    const uptimeElement = document.querySelector('.system-info .info-item:nth-child(2)');\n    if (uptimeElement) {\n        const uptime = Math.floor(Date.now() / 1000 / 60); // Minutes since page load\n        const hours = Math.floor(uptime / 60);\n        const minutes = uptime % 60;\n        uptimeElement.innerHTML = `<strong>Uptime:</strong> ${hours} hours ${minutes} minutes`;\n    }\n    \n    // Update memory and CPU usage with random values\n    const memoryProgress = document.querySelector('.progress .progress-bar');\n    const cpuProgress = document.querySelector('.progress .progress-bar.bg-success');\n    \n    if (memoryProgress) {\n        const memoryUsage = Math.floor(Math.random() * 20) + 60; // 60-80%\n        memoryProgress.style.width = `${memoryUsage}%`;\n        memoryProgress.textContent = `${memoryUsage}%`;\n    }\n    \n    if (cpuProgress) {\n        const cpuUsage = Math.floor(Math.random() * 30) + 15; // 15-45%\n        cpuProgress.style.width = `${cpuUsage}%`;\n        cpuProgress.textContent = `${cpuUsage}%`;\n    }\n}\n","size_bytes":9800}},"version":1}